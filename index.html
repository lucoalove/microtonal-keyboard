<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Microtonal Keyboard</title>
    <script src="https://unpkg.com/tone@15.0.4/build/Tone.js"></script>

    <style>
        body { font-family: sans-serif; }
    </style>
    
    <script>

        const audioContext = new (window.AudioContext || window.webkitAudioContext)();

        function playTone(frequency, duration) {
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.type = 'sine'; // You can change the type: sine, square, triangle, sawtooth
            oscillator.frequency.value = frequency; // Frequency in Hz
            
            // Ensure gain is set to 0 after the duration to prevent hanging notes
            gainNode.gain.setValueAtTime(0, audioContext.currentTime);
            gainNode.gain.linearRampToValueAtTime(1, audioContext.currentTime + 0.01); // Fade in
            gainNode.gain.linearRampToValueAtTime(0, audioContext.currentTime + duration); // Fade out
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + duration);
        }
        
        // Example usage: Play a 440Hz tone for 1 second
        playTone(440, 1);

        // document.addEventListener("keydown", function(event) {
                
        //     switch (event.key) {
        //         case "a": synth.triggerAttackRelease(pitch(0), "8n"); break;
        //         case "s": synth.triggerAttackRelease(pitch(3), "8n"); break;
        //         case "d": synth.triggerAttackRelease(pitch(6), "8n"); break;
        //         case "f": synth.triggerAttackRelease(pitch(7), "8n"); break;
        //         case "g": synth.triggerAttackRelease(pitch(10), "8n"); break;
        //         case "h": synth.triggerAttackRelease(pitch(13), "8n"); break;
        //         case "j": synth.triggerAttackRelease(pitch(16), "8n"); break;
        //         case "k": synth.triggerAttackRelease(pitch(17), "8n"); break;
        //     }
            
        // });
    </script>
</head>

<body>

    <a href="https://github.com/lucoalove/microtonal-keyboard/">repo</a>

    <button type="button" onclick="playTone(440, 1);">Click</button>

    <p><small><strong>Made with <a href="https://tonejs.github.io/">ToneJS</a></strong></small></p>
</body>

</html>
