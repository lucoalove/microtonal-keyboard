<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Microtonal Keyboard</title>
    <script src="https://unpkg.com/tone@15.0.4/build/Tone.js"></script>

    <style>
        body { font-family: sans-serif; }
    </style>
    
    <script>

        async function startAudio(button) {
            await Tone.start();
            button.display = "none";
        }

        function pitch(degree) {
            return 220 * Math.pow(2, degree/17.0);
        }

        const synth = new Tone.Synth().toDestination();

        document.addEventListener("keydown", function(event) {
                
            switch (event.key) {
                case "a": synth.triggerAttackRelease(pitch(0), "8n"); break;
                case "s": synth.triggerAttackRelease(pitch(3), "8n"); break;
                case "d": synth.triggerAttackRelease(pitch(6), "8n"); break;
                case "f": synth.triggerAttackRelease(pitch(7), "8n"); break;
                case "g": synth.triggerAttackRelease(pitch(10), "8n"); break;
                case "h": synth.triggerAttackRelease(pitch(13), "8n"); break;
                case "j": synth.triggerAttackRelease(pitch(16), "8n"); break;
                case "k": synth.triggerAttackRelease(pitch(17), "8n"); break;
            }
            
        });
    </script>
</head>

<body>

    <a href="https://github.com/lucoalove/microtonal-keyboard/">repo</a>

    <button type="button" onclick="startAudio(this);">Click to start audio</button>

    <p><small><strong>Made with <a href="https://tonejs.github.io/">ToneJS</a></strong></small></p>
</body>

</html>
