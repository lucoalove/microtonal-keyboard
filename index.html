<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Microtonal Keyboard</title>
    <script src="https://unpkg.com/tone@15.0.4/build/Tone.js"></script>

    <style>
        body { font-family: sans-serif; }
    </style>
    
    <script>

        const audioContext = new (window.AudioContext || window.webkitAudioContext)();

        function playTone(degree) {
            
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.type = "square"; // You can change the type: sine, square, triangle, sawtooth
            oscillator.frequency.value = 220 * Math.pow(2, degree/17.0);
            
            // ensure gain is set to 0 after the duration to prevent hanging notes
            gainNode.gain.setValueAtTime(0, audioContext.currentTime);
            gainNode.gain.linearRampToValueAtTime(1, audioContext.currentTime + 0.02);
            gainNode.gain.linearRampToValueAtTime(1, audioContext.currentTime + 0.2);
            gainNode.gain.linearRampToValueAtTime(0, audioContext.currentTime + 0.3);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.3);
        }

        document.addEventListener("keydown", function(event) {
                
            switch (event.key) {
                case "a": playTone(0); break;
                case "s": playTone(3); break;
                case "d": playTone(6); break;
                case "f": playTone(7); break;
                case "g": playTone(10); break;
                case "h": playTone(13); break;
                case "j": playTone(16); break;
                case "k": playTone(17); break;
            }
            
        });
    </script>
</head>

<body>

    <a href="https://github.com/lucoalove/microtonal-keyboard/">repo</a>

    use keybort

</body>

</html>
